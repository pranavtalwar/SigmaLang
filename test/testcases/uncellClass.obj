var cell = class { 
  contents = {x} 0 , 
  set = {x} \ n -> x.contents <~ n
};

var uncell = class { 
  undo = {x} x, 
  set = {x} super.set(var y=clone(x); x.undo <~ y) 
} extends cell;

(new uncell).set(3).set(5).undo.contents